var B=Object.create;var y=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var q=(t,e)=>{for(var o in e)y(t,o,{get:e[o],enumerable:!0})},d=(t,e,o,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of K(e))!H.call(t,r)&&r!==o&&y(t,r,{get:()=>e[r],enumerable:!(s=G(e,r))||s.enumerable});return t};var P=(t,e,o)=>(o=t!=null?B(U(t)):{},d(e||!t||!t.__esModule?y(o,"default",{value:t,enumerable:!0}):o,t)),X=t=>d(y({},"__esModule",{value:!0}),t);var st={};q(st,{default:()=>rt});module.exports=X(st);var V=require("@parcel/plugin");var c=require("path");var E=P(require("fast-glob")),b=require("fs"),S=require("fs-extra"),l=require("path");var m=require("path"),w=t=>t.replaceAll(m.win32.sep,m.posix.sep);var i=[".ts",".tsx",".svelte",".vue",".json"],M=new Set(i),n={got:null,dotPlasmoDirectory:null,polyfillMap:null,aliasMap:null},L=async t=>{if(n.got===null&&(n.got=(await import("got")).default),n.dotPlasmoDirectory||(n.dotPlasmoDirectory=(0,l.resolve)(process.env.PLASMO_PROJECT_DIR,".plasmo")),!n.polyfillMap){let e=(0,l.join)(__dirname,"polyfills"),o=await(0,E.default)("**/*.js",{cwd:e,onlyFiles:!0});n.polyfillMap=new Map(o.map(s=>[w(s.slice(0,-3)),(0,l.join)(e,s)]))}if(!n.aliasMap){let e=await(0,S.readJson)((0,l.resolve)(process.env.PLASMO_PROJECT_DIR,"package.json"));n.aliasMap=new Map(Object.entries(e.alias||{}))}},u=async(t,e=i,o={})=>{let s=e.flatMap(r=>[`${t}${r}`,(0,l.resolve)(t,`index${r}`)]);for(let r of s)try{if((0,b.statSync)(r).isFile())return{filePath:r,...o}}catch{}return null};async function F({specifier:t,dependency:e}){if(t[0]!=="/"||(0,c.isAbsolute)(t))return null;let o=(0,c.resolve)(process.env.PLASMO_PROJECT_DIR,t.slice(1));if((0,c.extname)(o).length>0)return{filePath:o};let r=(0,c.extname)(e.resolveFrom),a=[r,...i.filter(p=>p!==r)];return u(o,a)}var k=require("path");var _=require("fs"),f=require("fs/promises");var v=typeof globalThis.process<"u"?globalThis.process.argv:[];var h=()=>typeof globalThis.process<"u"?globalThis.process.env:{},Q=/\$([\w+]+)/gm,D=(t,e=h(),o=Q)=>t.replace(o,(s,r)=>e[r]||s);var Y=new Set(v),A=t=>Y.has(t),ht=v.filter(t=>t.startsWith("--")&&t.includes("=")).map(t=>t.split("=")).reduce((t,[e,o])=>(t[e]=o,t),{});var Rt=A("--dry-run"),O=()=>A("--verbose")||h().VERBOSE==="true",xt=O();async function Z(t,e){try{return await(0,f.access)(t,e),!0}catch{return!1}}async function $(t){return Z(t,_.constants.R_OK)}async function T({specifier:t}){if(!n.aliasMap.has(t))return null;let e=(0,k.resolve)(n.aliasMap.get(t));return await $(e)?{filePath:e,priority:"sync"}:null}var tt=new Set(["firebase-admin"]);async function C({specifier:t,dependency:e}){if(t.startsWith("./")||t.startsWith("../"))return null;try{let o=t.split("/");if(o.length>2||tt.has(o[0]))return{filePath:require.resolve(t,{paths:[e.resolveFrom]})}}catch{}return null}var R=require("path");var et=(t="",e="",o="")=>{if(!t.startsWith(e))return null;let[s,r]=t.split(e);return u((0,R.resolve)(o,r))};async function I({specifier:t}){return et(t,"@plasmo-static-common/",(0,R.resolve)(n.dotPlasmoDirectory,"static","common"))}async function W({specifier:t}){return n.polyfillMap.has(t)?{filePath:n.polyfillMap.get(t),priority:"sync"}:null}var x=require("@parcel/hash"),j=require("path");var ot=async(t,e)=>t.origin==="https://www.googletagmanager.com"?e.replace(/http:/g,"chrome-extension:"):e;async function N({specifier:t,dependency:e,options:o}){if(!t.startsWith("https://")||!i.some(a=>e.sourcePath.endsWith(a)))return null;let s=new URL(D(t)),r=s.searchParams.get("plasmo-ext")||"js";try{let a=await n.got(s.toString()).text(),p=await ot(s,a),z=(0,j.resolve)(o.projectRoot,`${(0,x.hashString)(t)}-${(0,x.hashString)(p)}.${r}`);return{code:p,priority:"lazy",filePath:z}}catch(a){return{diagnostics:[{message:`Cannot download the resource from ${t}`,hints:[a.message]}]}}}var g=require("path");async function J({specifier:t,dependency:e}){if(t[0]!=="~")return null;let o=(0,g.resolve)(process.env.PLASMO_SRC_DIR,t.slice(1)),s=(0,g.extname)(o);if(s.length>0&&M.has(s))return{filePath:o};let r=(0,g.extname)(e.resolveFrom),a=[r,...i.filter(p=>p!==r)];return u(o,a)}var rt=new V.Resolver({async resolve(t){return await L(t),await T(t)||await I(t)||await W(t)||await N(t)||await J(t)||await F(t)||await C(t)||null}});0&&(module.exports={});
